<!DOCTYPE html>
<html lang="pt_BR" ng-app="facilitime">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- ICON -->
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <!--Angular Active-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <!--Bootstrap-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!--CSS-->
    <link rel="stylesheet" href="/assets/css/profile.css" />
    <!--Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap"
      rel="stylesheet"
    />
    <title>Perfil</title>
  </head>
  <body ng-controller="EditProfileController">
    <div
      class="container d-flex flex-column justify-content-center rounded align-items-center"
    >
      <header
        class="px-5 py-3 d-flex justify-content-between align-items-center rounded"
      >
        <div class="logo">
          <a href="/">facilitime</a>
        </div>
      </header>
      <main class="d-flex justify-content-center align-items-center">
        <div class="login-area p-5 z-3">
          <div
            ng-show="successMessage"
            class="alert alert-success alert-dismissible"
            role="alert"
          >
            Dados Atualizados com Sucesso!
            <button
              type="button"
              class="btn-close"
              aria-label="Close"
              ng-click="successMessage = false"
            ></button>
          </div>
          <div
            ng-show="errorMessage"
            class="alert alert-danger alert-dismissible fade show"
            role="alert"
          >
            Ocorreu Algum Erro!
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
              ng-click="errorMessage = false"
            ></button>
          </div>
          <div class="title mb-3">
            <h2 class="text-center">Edite a Sua Conta</h2>
          </div>
          <form name="createUserForm" ng-submit="updateUser()">
            <div class="name-area mb-4">
              <p class="mb-1">Nome</p>
              <input
                type="text"
                name="name"
                placeholder="Digite o seu nome"
                class="form-control border border-dark"
                ng-model="name"
              />
            </div>
            <div class="phone-area mb-4">
              <p class="mb-1">Telefone</p>
              <input
                type="text"
                name="phone"
                placeholder="(xx)xxxxx-xxxx"
                class="form-control border border-dark"
                ng-model="phone"
              />
            </div>
            <div class="email-area mb-4">
              <p class="mb-1">Email</p>
              <input
                type="email"
                name="email"
                placeholder="Digite seu email"
                class="form-control border border-dark"
                ng-model="email"
              />
            </div>
            <div class="password-area mb-4">
              <p class="mb-1">Senha</p>
              <input
                type="password"
                name="password"
                placeholder="A senha precisa ter no mínimo 6 caracteres"
                class="form-control border border-dark"
                ng-model="password"
                ng-minlenght="6"
              />
            </div>
            <div class="password-confirm mb-4">
              <p class="mb-1">Confirmar Senha</p>
              <input
                type="password"
                name="passwordConfirmation"
                placeholder="Confirme sua senha"
                class="form-control border border-dark"
                ng-model="passwordConfirmation"
              />
              <span
                class="text-danger"
                ng-if="createUserForm.passwordConfirmation.$dirty && password != passwordConfirmation"
              >
                As senhas estão diferentes.
              </span>
            </div>
            <button
              type="submit"
              class="mb-3 p-2 btn btn-danger"
              ng-disabled="createUserForm.$invalid || loading"
            >
              {{loading ? "Enviando..." : "Salvar"}}
            </button>
            <div class="log-area mb-3 text-center">
              <a href="/">Voltar</a>
            </div>
            <div class="delete-user">
              <button
                class="btn btn btn-danger"
                type="button"
                ng-click="deleteUser()"
              >
                Excluir Minha Conta
              </button>
            </div>
          </form>
        </div>
      </main>
    </div>
    <script src="/assets/js/angular-app.js"></script>
    <script src="/assets/js/lib/jwt-decode.js"></script>
    <script src="/assets/js/services/session.service.js"></script>
    <script src="/assets/js/controllers/profile.controller.js"></script>
  </body>
</html>
